#!/bin/bash

# Task 5: Parallel Data Fetching

# Define the list of Pokémon
POKEMONS=("bulbasaur" "ivysaur" "venusaur" "charmander" "charmeleon")

# Define the directory for storing data
DATA_DIR="Advanced_shell"

# Create the data directory if it doesn't exist
mkdir -p "$DATA_DIR"

# Function to retrieve Pokémon data
get_pokemon_data() {
  local pokemon="$1"
  local output_file="$2"
  local api_url="https://pokeapi.co/api/v2/pokemon/$pokemon"

  echo "Retrieving data for $pokemon..."
  curl -s "$api_url" > "$output_file"

  if [ -s "$output_file" ]; then
    echo "Data for $pokemon successfully retrieved and saved to $output_file."
  else
    echo "Error: Failed to retrieve data for $pokemon."
  fi
}

# Loop through the list of Pokémon and fetch data in parallel
for POKEMON in "${POKEMONS[@]}"; do
  OUTPUT_FILE="$DATA_DIR/$POKEMON.json"
  get_pokemon_data "$POKEMON" "$OUTPUT_FILE" & # Run in background
done

# Wait for all background processes to complete
wait

echo "All Pokémon data retrieval processes completed."
